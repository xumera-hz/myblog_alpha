
<div class="container">
<h1>Блог Повелителя Мира</h1>
<%= link_to 'Новый план захвата мира', new_article_path, :class => "btn btn-primary btn-lg" %>
<%= link_to 'Метки', alltags_path, :class => "btn btn-success btn-lg" %>
<%= link_to 'Планы', articles_path, :class => "btn btn-primary btn-lg" %>
<br><br>
<%= form_for :tag, url: alltags_path do |f| %>
  <%= f.label 'Поиск по тегам' %>
  <%= f.text_field :name  %>
  <%= f.submit 'Искать' %>
<% end %>
<br>
<table class="table">
<thead>
<tbody>
<% 
@CountCols=4
@CountTags=@tags.count
@CountRows=@CountTags/@CountCols
@EtcTags=@CountTags-@CountCols*@CountRows
@i = 0
while @i<@CountRows
@j=0 
%>
<tr>
<% while @j<@CountCols %>
<td><%= link_to @tags[@i*@CountCols+@j].name, articles_tagged_path(:name => "#{@tags[@i*@CountCols+@j].name}"), :class => "btn btn-info btn-sm" %></td>
<%
@j=@j+1
end
%></tr>
<%
@i=@i+1
end
%><tr>
<%
@j=0
while @j<@EtcTags
%>
<td><%= link_to @tags[@i*@CountCols+@j].name, articles_tagged_path(:name => "#{@tags[@i*@CountCols+@j].name}"), :class => "btn btn-info btn-sm" %></td>
<%
@j=@j+1
end
%>
<%
@j=0
while @j<@CountCols-@EtcTags
%>
<td></td>
<%
@j=@j+1
end
%>
</tr>
 </tbody>
</table>
</div>
